<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mips Simulator</title>

    <style>
        html,
        body {
            margin: 0 auto;
            overflow-x: hidden;
        }

        .container {
            /* display: block; */
            width: 100vw;
            padding: 1rem;
            background-color: beige;
        }

        .center {
            /* display: block; */
            margin: auto;
            width: fit-content;
        }

        .col {
            display: inline-block;
        }

        .top {
            vertical-align: top;
        }

        .row {
            display: block;
            width: 100%;
            height: fit-content;
        }

        .register-name {
            width: 20%;
            min-width: fit-content;
            padding: 1% 0% 1% 3%;
            border: 1px solid black;
            overflow-x: auto;
            vertical-align: top;
            height: auto;
        }

        .register-value {
            width: 70%;
            min-width: fit-content;
            padding: 1% 0% 1% 3%;
            border: 1px solid black;
            overflow-x: auto;
            /* margin-bottom: 1%; */
        }
    </style>
</head>

<body>
    <div id="input-area" class="container">
        <h3>Carregar Arquivo</h3>
        <label for="file-input">Escolha o arquivo binario: </label>
        <input id="file-input" type="file">

        <br><br>

        <label for="text-input">Ou insira o codigo aqui:</label>
        <textarea name="Entrada" id="text-input" cols="32" rows="10"
            placeholder="Entrada alternativa do codigo binario..." style="display: block;">
00100000000010100000000011111111
00100000000010110000000011111110
00100000000010100000000010101011
00100000000011010000000011111000
00010001001010011111111111111011
00000001100010100111000000101010
10101100001010100000000000000100
10001100001010000000000000000100
00000001010010110100100000100000
00000001010010110100000000100010
00000001010010110100100000100100
00000001100011010111000000100101
        </textarea>

    </div>
    <hr>

    <div class="container">
        <div class="center">
            <button id="btn-next" onclick="cycle()">Proximo passo</button>
            <span id="status"></span>
        </div>
    </div>

    <hr>

    <div class="container">
        <div style="width: 27.5%; background-color: aliceblue;" class="col top">
            <div class="row">
                <hr>
                <span class="col register-name">$pc</span>
                <span id="pc" class="col register-value"></span>
                <hr>
            </div>

            <div class="row">
                <h3 class="center">Banco de Registradores</h3>
            </div>

            <div class="row" style="padding-top: 1%;">

                <hr>
                <!-- <span class="col register-name">$pc</span>
                <span id="pc" class="col register-value"></span>
                <hr> -->

                <span class="col register-name">$zero</span>
                <span class="col register-value">00000000000000000000000000000000</span>

                <span class="col register-name">$at</span>
                <span id="at" class="col register-value">Reservado para o assembler</span>

                <span class="col register-name">$v0</span>
                <span id="v0" class="col register-value"></span>

                <span class="col register-name">$v1</span>
                <span id="v1" class="col register-value"></span>

                <span class="col register-name">$a0</span>
                <span id="a0" class="col register-value"></span>

                <span class="col register-name">$a1</span>
                <span id="a1" class="col register-value"></span>

                <span class="col register-name">$a2</span>
                <span id="a2" class="col register-value"></span>

                <span class="col register-name">$a3</span>
                <span id="a3" class="col register-value"></span>

                <span class="col register-name">$t0</span>
                <span id="t0" class="col register-value"></span>

                <span class="col register-name">$t1</span>
                <span id="t1" class="col register-value"></span>

                <span class="col register-name">$t2</span>
                <span id="t2" class="col register-value"></span>

                <span class="col register-name">$t3</span>
                <span id="t3" class="col register-value"></span>

                <span class="col register-name">$t4</span>
                <span id="t4" class="col register-value"></span>

                <span class="col register-name">$t5</span>
                <span id="t5" class="col register-value"></span>

                <span class="col register-name">$t6</span>
                <span id="t6" class="col register-value"></span>

                <span class="col register-name">$t7</span>
                <span id="t7" class="col register-value"></span>

                <span class="col register-name">$r0</span>
                <span id="r0" class="col register-value"></span>

                <span class="col register-name">$r1</span>
                <span id="r1" class="col register-value"></span>

                <span class="col register-name">$r2</span>
                <span id="r2" class="col register-value"></span>

                <span class="col register-name">$r3</span>
                <span id="r3" class="col register-value"></span>

                <span class="col register-name">$r4</span>
                <span id="r4" class="col register-value"></span>

                <span class="col register-name">$r5</span>
                <span id="r5" class="col register-value"></span>

                <span class="col register-name">$r6</span>
                <span id="r6" class="col register-value"></span>

                <span class="col register-name">$r7</span>
                <span id="r7" class="col register-value"></span>

                <span class="col register-name">$t8</span>
                <span id="t8" class="col register-value"></span>

                <span class="col register-name">$t9</span>
                <span id="t9" class="col register-value"></span>

                <span class="col register-name">$k0</span>
                <span id="k0" class="col register-value">Reservado pelo Sisema Operacional</span>

                <span class="col register-name">$k1</span>
                <span id="k1" class="col register-value">Reservado pelo Sisema Operacional</span>

                <span class="col register-name">$gp</span>
                <span id="gp" class="col register-value"></span>

                <span class="col register-name">$sp</span>
                <span id="sp" class="col register-value"></span>

                <span class="col register-name">$fp</span>
                <span id="fp" class="col register-value"></span>

                <span class="col register-name">$ra</span>
                <span id="ra" class="col register-value"></span>
            </div>
        </div>

        <div style="width: 30%; background-color: azure;" class="col top">
            <div class="row">
                <h3 class="center">Registradores Pipeline</h3>
            </div>
            <hr>

            <div class="row" style="padding-top: 1%;">
                <span class="col register-name">IF/ID</span>
                <span id="if-id" class="col register-value"></span>
            </div>

            <div class="row" style="padding-top: 1%;">
                <span class="col register-name">ID/EX</span>
                <span id="id-ex" class="col register-value"></span>
            </div>

            <div class="row" style="padding-top: 1%;">
                <span class="col register-name">EX/MEM</span>
                <span id="ex-mem" class="col register-value"></span>
            </div>

            <div class="row" style="padding-top: 1%;">
                <span class="col register-name">MEM/WB</span>
                <span id="mem-wb" class="col register-value"></span>
            </div>
        </div>
    </div>


    <script>
        // Nao permite digitar nada alem de 0 e 1 na caixa de texto
        document.getElementById("text-input").addEventListener('keydown', (e) => {
            switch (e.key) {
                case '0':
                case '1':
                case 'Enter':
                case 'Backspace':
                case 'ArrowUp':
                case 'ArrowDown':
                case 'ArrowLeft':
                case 'ArrowRight':
                    break;

                default:
                    e.preventDefault();
            }
        }, false);
    </script>

    <script src="alu.js"></script>
    <script src="controls.js"></script>
    <script src="simulador.js"></script>
</body>

</html>